# Boas-vindas ao repositÃ³rio do exercÃ­cio do dia `24.2 - ORM - Associations`


Esse Ã© o exercÃ­cio do conteÃºdo do dia `24.2 - ORM - Associations`. Esse exercÃ­cio vai consolidar as seguintes habilidades:

* Criar modelos
* Relacionar dois modelos com hasMany
* Relacionar dois modelos com belongsTo
* Relacionar dois modelos com belongsToMany
* Utilizar eager loading ou lazy loading

### OrientaÃ§Ãµes

<details>
  <summary><strong> âŒ¨ï¸ Antes de iniciar</strong></summary>

  Crie um fork desse projeto e para isso siga esse [tutorial de como realizar um fork](https://guides.github.com/activities/forking/).

  ApÃ³s feito o fork, clone o repositÃ³rio criado para o seu computador.

  Rode o `npm install`.

  VÃ¡ para a branch master do seu projeto e execute o comando:

  git branch

  Mude para a branch sequelize-associations com o comando git checkout -b sequelize-associations. Ã‰ nessa branch que vocÃª realizarÃ¡ a soluÃ§Ã£o para o exercÃ­cio.

  Observe o que deve ser feito nas instruÃ§Ãµes.

  ApÃ³s a soluÃ§Ã£o dos exercÃ­cios, abra um PR no seu repositÃ³rio forkado e, se quiser, mergeie para a master, sinta-se a vontade!

  **AtenÃ§Ã£o!** Quando for criar o PR vocÃª irÃ¡ se deparar com essa tela:

  ![PR do exercÃ­cio](images/example-pr.png)

  Ã‰ necessÃ¡rio realizar uma mudanÃ§a. Clique no *base repository* como na imagem abaixo:

  ![Mudando a base do repositÃ³rio](images/change-base.png)

  Mude para o seu repositÃ³rio. Seu nome estarÃ¡ na frente do nome dele, por exemplo: `antonio/exercise-sequelize-associations`. Depois desse passo a pÃ¡gina deve ficar assim:

  ![ApÃ³s mudanÃ§a](images/after-change.png)

  Agora basta criar o PULL REQUEST clicando no botÃ£o `Create Pull Request`.

  Para cada PR realize esse processo.
</details>

### Antes de comeÃ§ar os exercÃ­cios

Nesse exercÃ­cio vamos criar uma API que serÃ¡ responsÃ¡vel pela gestÃ£o de um sistema de saÃºde. Nesse sistema terÃ£o pacientes, cada um com seu plano. Cada paciente pode ter realizado vÃ¡rias cirurgias, que por sua vez, devem ser listadas e categorizadas. O diagrama abaixo demonstra como o banco de dados se comportarÃ¡:

![Diagrama](images/diagrama3.png)

Este repositÃ³rio jÃ¡ contÃ©m as dependÃªncias abaixo no `package.json`. Execute `npm install` para instalÃ¡-las.

- express
- nodemon
- sequelize
- mysql2
- sequelize-cli

O exercÃ­cio jÃ¡ vem com a estrutura bÃ¡sica do Sequelize configurada, **nÃ£o serÃ¡ necessÃ¡rio inicializar ou criar migrations ou seeders para as tabelas**, pois ela jÃ¡ estÃ£o feitas. 

SerÃ¡ necessÃ¡rio configurar o arquivo `config/config.js` com os dados de seu servidor. Para isso, crie um arquivo .env para configurar suas variÃ¡veis de ambiente. O arquivo .env.example contÃ©m um exemplo das variÃ¡veis de ambiente que devem ser configuradas

ApÃ³s, utilize os comandos abaixo:

```bash
npx sequelize db:create
npx sequelize db:migrate
npx sequelize db:seed:all
```

Esses comandos vÃ£o criar respectivamente, a `database`, as `tables` e apÃ³s, inserir dados exemplos nas tabelas.

As tabelas criadas sÃ£o:

- Patients
- Patients_surgeries
- Plans
- Surgeries

Feito isso, ja podem ser realizados os exercÃ­cios abaixo.


### ExercÃ­cios

#### ğŸš€ ExercÃ­cio 1

Crie o model de `Plans`.

#### ğŸš€ ExercÃ­cio 2

Crie o model de `Patients`.

#### ğŸš€ ExercÃ­cio 3

Crie o model de `Surgeries`.

#### ğŸš€ ExercÃ­cio 4

Crie o model de `Patient_surgeries`.

#### ğŸš€ ExercÃ­cio 5

Crie um endpoint que liste todos os pacientes e seus respectivos planos.

#### ğŸš€ ExercÃ­cio 6

Crie um endpoint que liste todos os pacientes e suas respectivas cirurgias realizadas.

#### ğŸš€ ExercÃ­cio 7

Crie um endpoint que de acordo com o id de um plano, que deve ser recebido via requisiÃ§Ã£o, liste os pacientes que o possuem.

### BÃ´nus

#### ğŸš€ ExercÃ­cio 1 

Crie um endpoint capaz de adicionar um novo paciente.

#### ğŸš€ ExercÃ­cio 2

Crie um endpoint que liste todos os pacientes e suas cirurgias realizadas, mas oculte o nome do mÃ©dico responsÃ¡vel.

#### ğŸš€ ExercÃ­cio 3

Crie um endpoint que de acordo com o nome do mÃ©dico, que deve ser recebido via requisiÃ§Ã£o, liste todas as cirurgias realizadas pelo mesmo, um get na url `http://localhost:3000/surgeries/Rey%20Dos%20Santos`deve retornar as cirurgias realizadas pelo mÃ©dico `Rey Dos Santos`.
